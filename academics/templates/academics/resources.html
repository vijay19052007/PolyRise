{% extends 'base_dashboard.html' %}
{% load static %}

{% block title %}Academics & Resources - PolyRise{% endblock %}

{% block extra_head %}
<link rel="stylesheet" href="{% static 'academics/css/resources.css' %}">
{% endblock %}

{% block content %}
<div class="container mt-4">
    <div class="header">
        <h1>Academics & Resources ðŸ“š</h1>
        <p>Access study materials, previous papers, and manage your notes</p>
    </div>

    <div class="tabs mb-3">
        <button class="tab-btn active" data-tab="syllabus">Syllabus Explorer</button>
        <button class="tab-btn" data-tab="papers">Previous Papers</button>
        <button class="tab-btn" data-tab="faculty_notes">Study Notes</button>
        <button class="tab-btn" data-tab="personal_notes">My Notes</button>
    </div>

    <div class="tab-content">

        <!-- Syllabus Explorer -->
        <div id="syllabus" class="tab-section active">
            <div class="filters mb-2">
                <form method="get">
                    <select name="branch">
                        <option value="">Select Branch</option>
                        <option value="CO">Computer Engineering</option>
                        <option value="CE">Civil Engineering</option>
                        <option value="E&TC">Electrical & Telecommunication Engineering</option>
                        <option value="Mech">Mechanical Engineering</option>
                    </select>
                    <select name="semester">
                        <option value="">Select Semester</option>
                        {% for i in semesters %}
                        <option value="{{ i }}">{{ i }}</option>
                        {% endfor %}
                    </select>
                    <button type="submit">Filter</button>
                </form>
            </div>
            <div id="cards">
                {% for item in syllabus_list %}
                <div id="card">
                    <h5>{{ item.title }}</h5>
                    <p>{{ item.branch }} | Semester {{ item.semester }}</p>
                    <a href="{{ item.file.url }}" class="btn btn-primary" download>Download</a>
                </div>
                {% empty %}
                <p>No syllabus found.</p>
                {% endfor %}
            </div>
        </div>

        <!-- Previous Papers -->
        <div id="papers" class="tab-section">
            <div class="filters mb-2">
                <form method="get">
                    <select name="branch">
                         <option value="">Select Branch</option>
                        <option value="CO">Computer Engineering</option>
                        <option value="CE">Civil Engineering</option>
                        <option value="E&TC">Electrical & Telecommunication Engineering</option>
                        <option value="Mech">Mechanical Engineering</option>
                    </select>
                    <select name="semester">
                        <option value="">Select Semester</option>
                        {% for i in semesters %}
                        <option value="{{ i }}">{{ i }}</option>
                        {% endfor %}
                    </select>
                    <input type="text" name="subject" placeholder="Subject">
                    <input type="number" name="year" placeholder="Year">
                    <select name="exam_type">
                        <option value="">Select Exam</option>
                        <option value="Winter">Winter</option>
                        <option value="Summer">Summer</option>
                    </select>
                    <button type="submit">Filter</button>
                </form>
            </div>
            <div id="cards">
                {% for item in papers_list %}
                <div id="card">
                    <h5>{{ item.subject }} - {{ item.exam_name }}</h5>
                    <p>{{ item.branch }} | Sem {{ item.semester }} | {{ item.year }} | {{ item.exam_type }}</p>
                    <a href="{{ item.file.url }}" class="btn btn-primary" download>Download</a>
                </div>
                {% empty %}
                <p>No previous papers found.</p>
                {% endfor %}
            </div>
        </div>

        <!-- Faculty Notes -->
        <div id="faculty_notes" class="tab-section">
            <div class="filters mb-2">
                <form method="get">
                    <select name="branch">
                        <option value="">Select Branch</option>
                        <option value="CO">Computer Engineering</option>
                        <option value="CE">Civil Engineering</option>
                        <option value="E&TC">Electrical & Telecommunication Engineering</option>
                        <option value="Mech">Mechanical Engineering</option>
                    </select>
                    <select name="semester">
                        <option value="">Select Semester</option>
                        {% for i in semesters %}
                        <option value="{{ i }}">{{ i }}</option>
                        {% endfor %}
                    </select>
                    <input type="text" name="subject" placeholder="Subject">
                    <button type="submit">Filter</button>
                </form>
            </div>
            <div id="cards">
                {% for item in faculty_notes_list %}
                <div id="card">
                    <h5>{{ item.title }}</h5>
                    <p>{{ item.branch }} | Sem {{ item.semester }} | {{ item.subject }}</p>
                    <a href="{{ item.file.url }}" class="btn btn-primary" download>Download</a>
                </div>
                {% empty %}
                <p>No study notes found.</p>
                {% endfor %}
            </div>
        </div>

        <!-- Personal Notes -->
        <div id="personal_notes" class="tab-section">
            <button id="add-note-btn" class="btn btn-success mb-2">Add Note</button>
            <div id="add-note-form" style="display:none;">
                <form method="post">
                    {% csrf_token %}
                    <input type="text" name="title" placeholder="Title" required>
                    <textarea name="content" placeholder="Content" required></textarea>
                    <input type="text" name="tags" placeholder="Tags">
                    <button type="submit" class="btn btn-primary">Save</button>
                </form>
            </div>
            <div id="cards">
                {% for item in personal_notes_list %}
                <div id="card">
                    <h5>{{ item.title }}</h5>
                    <p>Tags: {{ item.tags }}</p>
                    <a href="{% url 'edit_personal_note' item.id %}" class="btn btn-warning btn-sm">Edit</a>
                    <a href="{% url 'delete_personal_note' item.id %}" class="btn btn-danger btn-sm">Delete</a>
                </div>
                {% empty %}
                <p>No personal notes found.</p>
                {% endfor %}
            </div>
        </div>

    </div>
</div>



{% endblock %}
